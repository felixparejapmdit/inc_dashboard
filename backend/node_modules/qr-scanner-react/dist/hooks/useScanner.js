import e from '../node_modules/qr-scanner/qr-scanner.min.js';
import { useEffect } from 'react';

var useScanner = function (vid, _a) {
    var _b = _a.onResult, onResult = _b === void 0 ? function (result) {
        console.log(result);
    } : _b, _c = _a.color, color = _c === void 0 ? 'both' : _c, _d = _a.maxScansPerSecond, maxScansPerSecond = _d === void 0 ? 5 : _d, _e = _a.onError, onError = _e === void 0 ? function (error) {
        console.log(error);
    } : _e, _f = _a.cameraPreference, cameraPreference = _f === void 0 ? 'environment' : _f;
    var inversion = (color && color === 'dark' && 'original') ||
        (color && color === 'light' && 'invert') ||
        'both';
    useEffect(function () {
        var qrScanner = null;
        if (vid.current) {
            qrScanner = new e(vid.current, onResult, {
                onDecodeError: onError,
                maxScansPerSecond: maxScansPerSecond,
                preferredCamera: cameraPreference
            });
            if (!e.hasCamera()) {
                onError('Device has no camera');
            }
            else {
                qrScanner.setInversionMode(inversion);
                qrScanner.start();
            }
        }
        return function () {
            qrScanner && qrScanner.stop();
            qrScanner && qrScanner.destroy();
            qrScanner = null;
        };
    }, [vid.current]);
};

export { useScanner as default };
//# sourceMappingURL=useScanner.js.map
